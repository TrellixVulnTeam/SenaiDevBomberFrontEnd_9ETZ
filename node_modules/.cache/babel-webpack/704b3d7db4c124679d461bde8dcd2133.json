{"ast":null,"code":"import _asyncToGenerator from \"/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { XYZ, Cluster, Vector as VectorSource } from 'ol/source';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer';\nimport * as Proj from 'ol/proj.js'; //Converter cordenadas para lat e long\n\nimport 'ol/ol.css';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Circle as CircleStyle, Fill, Stroke, Style, Text } from 'ol/style';\nimport { boundingExtent } from 'ol/extent';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/dados.service\";\nimport * as i3 from \"@angular/material/sidenav\";\nimport * as i4 from \"@angular/material/toolbar\";\nexport class TelaHomeComponent {\n  constructor(router, dadosService) {\n    this.router = router;\n    this.dadosService = dadosService;\n    this.showFiller = false;\n  }\n\n  ngOnInit() {}\n\n  ngAfterViewInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.pontos = yield _this.dadosService.list();\n\n      const map = _this.MapaCreate();\n\n      const cluster = _this.cluster();\n\n      map.addLayer(cluster);\n\n      _this.cliqueEventMapa(map, cluster);\n    })();\n  }\n\n  cliqueEventMapa(map, cluster) {\n    map.on('click', evento => {\n      cluster.getFeatures(evento.pixel).then(clickedFeatures => {\n        if (clickedFeatures.length) {\n          const features = clickedFeatures[0].get('features');\n\n          if (features.length > 1) {\n            const extent = boundingExtent(features.map(r => r.getGeometry().getCoordinates()));\n            map.getView().fit(extent, {\n              duration: 1000,\n              padding: [50, 50, 50, 50]\n            });\n          }\n        }\n      });\n    });\n  }\n\n  MapaCreate() {\n    const latitude = -48.613666;\n    const longitude = -27.595115;\n    const raster = new TileLayer({\n      source: new XYZ({\n        url: 'https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}' //Formato do google maps\n\n      })\n    });\n    const map = new Map({\n      layers: [raster],\n      target: 'map',\n      view: new View({\n        center: Proj.fromLonLat([latitude, longitude]),\n        zoom: 14\n      })\n    });\n    return map;\n  }\n\n  cluster() {\n    const features = [];\n\n    for (let i = 0; i < this.pontos.length; ++i) {\n      const ponto = Proj.fromLonLat([this.pontos[i].longitude, this.pontos[i].latitude]);\n      features[i] = new Feature(new Point(ponto));\n    }\n\n    const source = new VectorSource({\n      features: features\n    });\n    const clusterSource = new Cluster({\n      distance: 80,\n      source: source\n    });\n    const styleCache = {};\n    const clusters = new VectorLayer({\n      source: clusterSource,\n      style: function (feature) {\n        const size = feature.get('features').length;\n        let style = styleCache[size];\n\n        if (!style) {\n          style = new Style({\n            image: new CircleStyle({\n              radius: 15,\n              stroke: new Stroke({\n                color: '#ff0000'\n              }),\n              fill: new Fill({\n                color: '#ff0000'\n              })\n            }),\n            text: new Text({\n              text: size.toString(),\n              fill: new Fill({\n                color: '#fff'\n              })\n            })\n          });\n          styleCache[size] = style;\n        }\n\n        return style;\n      }\n    });\n    return clusters;\n  }\n\n  telaConfigs() {\n    let alterado = false;\n    this.router.navigate(['/telaHome/telaConfig']);\n    alterado = true;\n\n    if (alterado = true) {\n      this.router.navigate(['/telaHome/']);\n      alterado = false;\n    }\n  }\n\n}\n\nTelaHomeComponent.ɵfac = function TelaHomeComponent_Factory(t) {\n  return new (t || TelaHomeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DadosService));\n};\n\nTelaHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TelaHomeComponent,\n  selectors: [[\"app-tela-home\"]],\n  decls: 31,\n  vars: 0,\n  consts: [[1, \"container\"], [\"autosize\", \"\"], [1, \"CampoSuperior\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/1/1324.png\", 2, \"width\", \"64px\", \"height\", \"64px\", \"padding\", \"10px\", \"filter\", \"invert(80%)\"], [1, \"Titulo01\"], [\"type\", \"button\", \"mat-button\", \"\", 1, \"btnLateralMenu\", 3, \"click\"], [\"mode\", \"side\", \"autosize\", \"\", 1, \"sidenav\"], [\"drawer\", \"\"], [1, \"linker\", 3, \"click\"], [\"src\", \"/assets/config.png\", 1, \"imgTool\"], [\"routerLink\", \"\", 1, \"linker\"], [\"src\", \"/assets/sair.png\", 1, \"imgTool\"], [\"mode\", \"side\", 1, \"sidenav\"], [\"config\", \"\"], [1, \"flex-container\"], [1, \"mapaEntrada\"], [\"id\", \"map\", 1, \"mapa01\"]],\n  template: function TelaHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r2 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"mat-drawer-container\", 1);\n      i0.ɵɵelementStart(2, \"mat-toolbar\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementStart(4, \"span\", 4);\n      i0.ɵɵtext(5, \"Bombeiros Digital\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_button_click_6_listener() {\n        i0.ɵɵrestoreView(_r2);\n\n        const _r0 = i0.ɵɵreference(9);\n\n        return _r0.toggle();\n      });\n      i0.ɵɵtext(7, \" Ferramentas \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-drawer\", 6, 7);\n      i0.ɵɵelementStart(10, \"h2\");\n      i0.ɵɵtext(11, \"Menu Principal\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelement(13, \"br\");\n      i0.ɵɵelementStart(14, \"p\", 8);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_p_click_14_listener() {\n        i0.ɵɵrestoreView(_r2);\n\n        const _r1 = i0.ɵɵreference(22);\n\n        return _r1.toggle();\n      });\n      i0.ɵɵelement(15, \"img\", 9);\n      i0.ɵɵtext(16, \"Configura\\u00E7\\u00F5es\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"br\");\n      i0.ɵɵelementStart(18, \"p\", 10);\n      i0.ɵɵelement(19, \"img\", 11);\n      i0.ɵɵtext(20, \"Sair \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"mat-drawer\", 12, 13);\n      i0.ɵɵelementStart(23, \"p\", 8);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_p_click_23_listener() {\n        return ctx.telaConfigs();\n      });\n      i0.ɵɵtext(24, \" Cadastro de usuario \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"p\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelement(27, \"br\");\n      i0.ɵɵelementStart(28, \"div\", 14);\n      i0.ɵɵelementStart(29, \"div\", 15);\n      i0.ɵɵelement(30, \"div\", 16);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n  },\n  directives: [i3.MatDrawerContainer, i4.MatToolbar, i3.MatDrawer, i1.RouterLink],\n  styles: [\"@charset \\\"UTF-8\\\";\\n.CampoSuperior[_ngcontent-%COMP%] {\\n  background-color: red;\\n  padding: 20px;\\n  width: 100vw;\\n  padding: 0;\\n}\\n.flex-container[_ngcontent-%COMP%] {\\n  flex-direction: row;\\n  display: flex;\\n  align-self: center;\\n  justify-content: center;\\n  align-content: center;\\n  padding: 0;\\n  height: 44em;\\n  width: 100vw;\\n  background-color: white;\\n  margin-top: -40px;\\n  max-height: 80em;\\n}\\n.flex-item[_ngcontent-%COMP%] {\\n  flex-direction: row;\\n  display: flex;\\n  align-self: center;\\n  justify-content: space-evenly;\\n  align-content: center;\\n  width: 100px;\\n  height: 100px;\\n  background-color: white;\\n}\\n.sidenav-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  height: 100%;\\n}\\n.sidenav[_ngcontent-%COMP%] {\\n  width: 20em;\\n  justify-content: end;\\n  align-items: end;\\n  align-content: flex-end;\\n  display: flex;\\n  position: fixed;\\n}\\n.container[_ngcontent-%COMP%] {\\n  height: 141vh;\\n  width: 79vw;\\n  display: contents;\\n}\\n.btnLateralMenu[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  border: 0;\\n  background-color: white;\\n  padding: 5px;\\n  margin: 20px;\\n  transition: 0.3s;\\n}\\n.btnLateralMenu[_ngcontent-%COMP%]:hover {\\n  transition: 0.2s;\\n  background-color: #c4bcbc;\\n}\\n.linker[_ngcontent-%COMP%]:hover {\\n  transition: 400ms;\\n  background-position: left;\\n  color: white;\\n}\\n.linker[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], img[_ngcontent-%COMP%]:hover {\\n  filter: invert(80%);\\n}\\n.linker[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  height: 2em;\\n  padding: 5px;\\n  display: flex;\\n  transition: 500ms ease-out;\\n  color: black;\\n  outline: 0;\\n  align-items: center;\\n  font-size: 18px;\\n  align-content: center;\\n  background: red;\\n  \\n  background: linear-gradient(to left, white 50%, red 50%) right;\\n  background-size: 200%;\\n  transition: 0.5s ease-out;\\n}\\n.mat-drawer-container[_ngcontent-%COMP%] {\\n  position: relative;\\n  z-index: 1;\\n  box-sizing: border-box;\\n  -webkit-overflow-scrolling: touch;\\n  display: block;\\n  overflow: hidden;\\n  height: 100%;\\n}\\n.Titulo01[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n.imgTool[_ngcontent-%COMP%] {\\n  height: 24px;\\n  width: 24px;\\n  margin: 5px;\\n}\\n.imgMaps[_ngcontent-%COMP%] {\\n  height: 28px;\\n  width: 28px;\\n  margin: 5px;\\n}\\n.mapa01[_ngcontent-%COMP%] {\\n  border: 1px solid black;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  border-radius: 2px;\\n  box-shadow: 0px 5px 12px 2px black;\\n}\\n.mapaEntrada[_ngcontent-%COMP%] {\\n  height: 80%;\\n  width: 100%;\\n  margin-top: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbGEtaG9tZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDRSxxQkFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtBQUVGO0FBR0E7RUFDRSxtQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0EscUJBQUE7RUFDQSxVQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7QUFBRjtBQU9BO0VBQ0UsbUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSw2QkFBQTtFQUNBLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFFQSx1QkFBQTtBQUxGO0FBUUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtBQUxGO0FBU0E7RUFFRSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLGVBQUE7QUFQRjtBQVVBO0VBQ0UsYUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtBQVBGO0FBV0E7RUFDRSxlQUFBO0VBQ0EsU0FBQTtFQUNBLHVCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtBQVJGO0FBV0E7RUFDRSxnQkFBQTtFQUNBLHlCQUFBO0FBUkY7QUFXQTtFQUVFLGlCQUFBO0VBQ0EseUJBQUE7RUFDQSxZQUFBO0FBVEY7QUFZQTtFQUNFLG1CQUFBO0FBVEY7QUFZQTtFQUNFLGVBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSwwQkFBQTtFQUNBLFlBQUE7RUFDQSxVQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EscUJBQUE7RUFDQSxlQUFBO0VBRUEsa0RBQUE7RUFDQSw4REFBQTtFQUNBLHFCQUFBO0VBQ0EseUJBQUE7QUFWRjtBQWFBO0VBQ0Usa0JBQUE7RUFDQSxVQUFBO0VBQ0Esc0JBQUE7RUFDQSxpQ0FBQTtFQUNBLGNBQUE7RUFDQSxnQkFBQTtFQUNBLFlBQUE7QUFWRjtBQWFBO0VBQ0UsWUFBQTtBQVZGO0FBYUE7RUFDRSxZQUFBO0VBQWMsV0FBQTtFQUFhLFdBQUE7QUFSN0I7QUFVQTtFQUNFLFlBQUE7RUFBYyxXQUFBO0VBQWEsV0FBQTtBQUw3QjtBQVFBO0VBQ0UsdUJBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUVBLGtDQUFBO0FBTkY7QUFTQTtFQUNFLFdBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtBQU5GIiwiZmlsZSI6InRlbGEtaG9tZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5DYW1wb1N1cGVyaW9ye1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHdpZHRoOiAxMDB2dztcbiAgcGFkZGluZzogMDtcblxuICBcbn1cblxuLmZsZXgtY29udGFpbmVyIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICBwYWRkaW5nOiAwO1xuICBoZWlnaHQ6IDQ0ZW07XG4gIHdpZHRoOiAxMDB2dztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xuICBtYXJnaW4tdG9wOiAtNDBweDtcbiAgbWF4LWhlaWdodDogODBlbTtcbn1cblxuXG5cblxuXG4uZmxleC1pdGVtIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICB3aWR0aDogMTAwcHg7XG4gIGhlaWdodDogMTAwcHg7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5cbi5zaWRlbmF2LWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IDEwMCU7XG4gIFxufVxuXG4uc2lkZW5hdiB7XG4gXG4gIHdpZHRoOiAyMGVtO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgYWxpZ24taXRlbXM6IGVuZDtcbiAgYWxpZ24tY29udGVudDogZmxleC1lbmQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbn1cblxuLmNvbnRhaW5lciB7XG4gIGhlaWdodDogMTQxdmg7XG4gIHdpZHRoOiA3OXZ3O1xuICBkaXNwbGF5OiBjb250ZW50cztcblxufVxuXG4uYnRuTGF0ZXJhbE1lbnV7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogNXB4O1xuICBtYXJnaW46IDIwcHg7XG4gIHRyYW5zaXRpb246IC4zcztcbn1cbi8vZDMgcGxvdGx5IFxuLmJ0bkxhdGVyYWxNZW51OmhvdmVye1xuICB0cmFuc2l0aW9uOiAuMnM7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxOTYsIDE4OCwgMTg4KTtcbiBcbn1cbi5saW5rZXI6aG92ZXJ7XG4gIFxuICB0cmFuc2l0aW9uOiA0MDBtcztcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogbGVmdDtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4ubGlua2VyIHAsaW1nOmhvdmVye1xuICBmaWx0ZXI6IGludmVydCg4MCUpO1xufVxuXG4ubGlua2Vye1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGhlaWdodDogMmVtO1xuICBwYWRkaW5nOiA1cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHRyYW5zaXRpb246IDUwMG1zIGVhc2Utb3V0O1xuICBjb2xvcjogYmxhY2s7XG4gIG91dGxpbmU6IDA7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGZvbnQtc2l6ZTogMThweDtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICBiYWNrZ3JvdW5kOiByZWQ7IFxuXG4gIC8qIEFuaW1hw6fDo28gZGUgbXVkYXIgY29yIGRhIGVzcXVlcmRhIHByYSBkaXJlaXRhICovXG4gIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBsZWZ0LCByZ2IoMjU1LCAyNTUsIDI1NSkgNTAlLCByZ2IoMjU1LCAwLCAwKSA1MCUpIHJpZ2h0O1xuICBiYWNrZ3JvdW5kLXNpemU6IDIwMCU7XG4gIHRyYW5zaXRpb246IC41cyBlYXNlLW91dDtcbn1cblxuLm1hdC1kcmF3ZXItY29udGFpbmVye1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDE7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbiAgZGlzcGxheTogYmxvY2s7XG4gIG92ZXJmbG93OiBoaWRkZW47IFxuICBoZWlnaHQ6IDEwMCU7XG59XG5cbi5UaXR1bG8wMXtcbiAgY29sb3I6IHdoaXRlO1xufVxuXG4uaW1nVG9vbHtcbiAgaGVpZ2h0OiAyNHB4OyB3aWR0aDogMjRweDsgbWFyZ2luOiA1cHg7XG59XG4uaW1nTWFwc3tcbiAgaGVpZ2h0OiAyOHB4OyB3aWR0aDogMjhweDsgbWFyZ2luOiA1cHg7XG59XG5cbi5tYXBhMDF7XG4gIGJvcmRlcjogMXB4IHNvbGlkIGJsYWNrO1xuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuICBkaXNwbGF5OiBmbGV4O1xuICBib3JkZXItcmFkaXVzOiAycHg7XG4gIFxuICBib3gtc2hhZG93OiAwcHggNXB4IDEycHggMnB4IGJsYWNrO1xufVxuXG4ubWFwYUVudHJhZGF7XG4gIGhlaWdodDogODAlO1xuICB3aWR0aDogMTAwJTtcbiAgbWFyZ2luLXRvcDogMDtcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/src/app/tela-home/tela-home.component.ts","/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/src/app/tela-home/tela-home.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit} from '@angular/core';\nimport { Router } from '@angular/router';\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport {XYZ, Cluster,  Vector as VectorSource} from 'ol/source';\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\nimport * as Proj from 'ol/proj.js';//Converter cordenadas para lat e long\nimport { DadosService } from '../services/dados.service';\nimport 'ol/ol.css';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport {\n  Circle as CircleStyle,\n  Fill,\n  Stroke,\n  Style,\n  Text,\n} from 'ol/style';\nimport {boundingExtent} from 'ol/extent';\n\n@Component({\n  selector: 'app-tela-home',\n  templateUrl: './tela-home.component.html',\n  styleUrls: ['./tela-home.component.scss']\n})\n\nexport class TelaHomeComponent implements OnInit {\n\n  constructor(private router: Router,\n     private dadosService:DadosService) { }\n  pontos: any;\n\n   ngOnInit() {}\n\n  async ngAfterViewInit(){\n  \n    this.pontos = await this.dadosService.list();\n    const map = this.MapaCreate();\n    const cluster = this.cluster();\n    map.addLayer(cluster);\n    this.cliqueEventMapa(map, cluster);\n  }\n\n\n  private cliqueEventMapa(map: Map, cluster: any) {//Função dar zoom clicando no mapa\n    map.on('click', (evento) => {\n      cluster.getFeatures(evento.pixel).then((clickedFeatures: any) => {\n        if (clickedFeatures.length) {\n          const features = clickedFeatures[0].get('features');\n          if (features.length > 1) {\n            const extent = boundingExtent(\n              features.map((r: any) => r.getGeometry().getCoordinates())\n            );\n            map\n              .getView()\n              .fit(extent, { duration: 1000, padding: [50, 50, 50, 50] });\n          }\n        }\n      });\n    });\n  }\n\n\n  private MapaCreate(){//Gerar o mapa, centralizado em são josé\n\n    const latitude = -48.613666;\n    const longitude = -27.595115;\n\n    const raster = new TileLayer({\n      source: new XYZ({\n        url: 'https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}', //Formato do google maps\n      }),\n    });\n\n    const map = new Map({\n      layers: [raster],\n      target: 'map',\n      view: new View({\n        center: Proj.fromLonLat([latitude, longitude]),//Local para aparecer em são josé\n        zoom: 14,\n      }),\n    });\n    return map;\n  }\n\n  \n\n\n  private cluster(){\n    const features: any[] = [];\n    for (let i = 0; i < this.pontos.length; ++i) {\n      const ponto = Proj.fromLonLat([\n        this.pontos[i].longitude,\n        this.pontos[i].latitude,\n      ]);\n      features[i] = new Feature(new Point(ponto));\n    }\n\n    const source = new VectorSource({\n      features: features,\n    });\n\n    const clusterSource = new Cluster({\n      distance: 80,\n      source: source,\n    });\n\n    const styleCache: any = {};\n\n    const clusters = new VectorLayer({\n      source: clusterSource,\n      style: function (feature) {\n        const size = feature.get('features').length;\n        let style = styleCache[size];\n        if (!style) {\n          style = new Style({\n            image: new CircleStyle({\n              radius: 15,\n              stroke: new Stroke({\n                color: '#ff0000',\n              }),\n              fill: new Fill({\n                color: '#ff0000',\n              }),\n            }),\n            text: new Text({\n              text: size.toString(),\n              fill: new Fill({\n                color: '#fff',\n              }),\n            }),\n          });\n          styleCache[size] = style;\n        }\n        return style;\n      },\n    });\n\n    return clusters;\n  }\n\n \n\n  showFiller = false;\n  \n\n\n   telaConfigs(): void {\n\n    let alterado = false;\n    this.router.navigate(['/telaHome/telaConfig']); \n    alterado = true;\n\n    if(alterado = true){\n      this.router.navigate(['/telaHome/']); alterado = false;\n    }\n    \n    }\n  \n\n  }  \n","<div class=\"container\">\n  <mat-drawer-container autosize>\n\n    <mat-toolbar class=\"CampoSuperior\" >\n\n      <img src=\"https://cdn-icons-png.flaticon.com/512/1/1324.png\"\n        style=\"width: 64px; height: 64px; padding: 10px; filter: invert(80%)\" />\n      <span class=\"Titulo01\">Bombeiros Digital</span>\n\n      <button type=\"button\" class=\"btnLateralMenu\" mat-button (click)=\"drawer.toggle()\">\n        Ferramentas\n      </button>\n    </mat-toolbar>\n    <!-- ↓ Menu lateral ↓ -->\n    <mat-drawer #drawer class=\"sidenav\" mode=\"side\" autosize>\n      <h2>Menu Principal</h2>\n      <br />\n      \n      <br />\n\n      <p class=\"linker\" (click)=\"config.toggle()\" >\n        <img class=\"imgTool\" src=\"/assets/config.png\" />Configurações</p>\n\n      <br />\n      <p class=\"linker\" routerLink=\"\">\n        <img class=\"imgTool\" src=\"/assets/sair.png\" />Sair\n      </p>\n    </mat-drawer>\n\n    <mat-drawer #config class=\"sidenav\" mode=\"side\">\n      <!--<app-tela-config></app-tela-config>-->\n      <p   class=\"linker\" (click)=\"telaConfigs()\" >\n        Cadastro de usuario\n      <p>\n    </mat-drawer>\n\n    <br />\n    <br />\n            <!-- ↓ centro da tela home ↓ -->\n    <div class=\"flex-container\">\n\n      <div class=\"mapaEntrada\">\n      \n        <!-- zona do mapa -->\n        <div id=\"map\" class=\"mapa01\"></div>\n        \n\n      </div>\n    </div>\n  </mat-drawer-container>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}