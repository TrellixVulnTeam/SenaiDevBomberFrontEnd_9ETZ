{"ast":null,"code":"import _asyncToGenerator from \"/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport { XYZ, Cluster, Vector as VectorSource } from 'ol/source';\nimport { Tile as TileLayer, Vector as VectorLayer } from 'ol/layer';\nimport * as Proj from 'ol/proj.js'; //Converter cordenadas para lat e long\n\nimport 'ol/ol.css';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport { Circle as CircleStyle, Fill, Stroke, Style, Text } from 'ol/style';\nimport { boundingExtent } from 'ol/extent';\nimport { Overlay } from 'ol';\nimport { features } from 'src/assets/features';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/dados.service\";\nimport * as i3 from \"@angular/material/sidenav\";\nimport * as i4 from \"@angular/material/toolbar\";\nconst _c0 = [\"popup\"];\nconst DEFAULTS = {\n  center: [-48.615261, -27.593823],\n  initialZoom: 13,\n  minZoom: 4,\n  maxZoom: 17\n};\nexport class TelaHomeComponent {\n  constructor(router, dadosService, nominatimService) {\n    this.router = router;\n    this.dadosService = dadosService;\n    this.nominatimService = nominatimService;\n    this.display = 'none';\n    this.showFiller = false;\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.pontos = yield _this.dadosService.list();\n    })();\n  }\n\n  ngAfterViewInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.popup = new Overlay({\n        element: _this2.element.nativeElement\n      });\n\n      const map = _this2.criarMapa();\n\n      const cluster = _this2.cluster(features.slice(features.length / 3, 2 * features.length / 3), '#0f0');\n\n      _this2.addCluster(map);\n\n      map.addLayer(cluster);\n    })();\n  }\n\n  criarMapa() {\n    const map = new Map({\n      layers: this.getInitialLayers(),\n      target: 'map',\n      overlays: [this.popup],\n      view: new View({\n        center: Proj.fromLonLat(DEFAULTS.center),\n        zoom: DEFAULTS.initialZoom\n      })\n    });\n    return map;\n  }\n\n  addCluster(map) {\n    const features = this.getFeatures();\n    const clustersR = this.cluster(features.slice(0, features.length / 3), '#f00');\n    const clustersG = this.cluster(features.slice(features.length / 3, 2 * features.length / 3), '#0f0');\n    const clustersB = this.cluster(features.slice(2 * features.length / 3, features.length), '#00f');\n    map.addLayer(clustersR);\n    map.addLayer(clustersG);\n    map.addLayer(clustersB);\n    map.on('click', e => {\n      this.display = 'none';\n      clustersR.getFeatures(e.pixel).then(clickedFeatures => this.clickCluster(e, clickedFeatures, map));\n      clustersG.getFeatures(e.pixel).then(clickedFeatures => this.clickCluster(e, clickedFeatures, map));\n      clustersB.getFeatures(e.pixel).then(clickedFeatures => this.clickCluster(e, clickedFeatures, map));\n    });\n  }\n\n  clickCluster(evt, clickedFeatures, map) {\n    if (clickedFeatures.length) {\n      const features = clickedFeatures[0].get('features');\n\n      if (features.length > 1) {\n        const extent = boundingExtent(features.map(r => r.getGeometry().getCoordinates()));\n        map.getView().fit(extent, {\n          duration: 1000,\n          padding: [50, 50, 50, 50]\n        });\n      } else if (features.length == 1) {\n        this.insertOverlay(evt, features[0].get('data'));\n      }\n    }\n  }\n\n  cluster(features, color) {\n    for (let i = 0; i < this.pontos.length; ++i) {\n      const ponto = Proj.fromLonLat([this.pontos[i].longitude, this.pontos[i].latitude]);\n      features[i] = new Feature(new Point(ponto));\n    }\n\n    const source = new VectorSource({\n      features: features\n    });\n    const clusterSource = new Cluster({\n      distance: 80,\n      source: source\n    });\n    const styleCache = {};\n    const clusters = new VectorLayer({\n      source: clusterSource,\n      style: function (feature) {\n        const size = feature.get('features').length;\n        let style = styleCache[size];\n\n        if (!style) {\n          style = new Style({\n            image: new CircleStyle({\n              radius: 10,\n              stroke: new Stroke({\n                color: '#000'\n              }),\n              fill: new Fill({\n                color: '#ff0000'\n              })\n            }),\n            text: new Text({\n              text: size.toString(),\n              fill: new Fill({\n                color: '#fff'\n              })\n            })\n          });\n          styleCache[size] = style;\n        }\n\n        return style;\n      }\n    });\n    return clusters;\n  }\n\n  insertOverlay(evt, data) {\n    this.display = 'block';\n    const element = this.popup.getElement();\n    const coordinate = evt.coordinate;\n    element.innerHTML = `<div><span>Item: ${data.item}</span><br><span>Rua: ${data.rua}</span></span></div>`;\n    this.popup.setPosition(coordinate);\n  }\n\n  getFeatures() {\n    return features.map(f => {\n      const feature = new Feature(new Point(Proj.fromLonLat([f.longitude, f.latitude])));\n      feature.set('data', f);\n      return feature;\n    });\n  }\n\n  getInitialLayers() {\n    const rasterLayer = new TileLayer({\n      source: new XYZ({\n        url: 'https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}&apistyle=s.t%3A1%7Cp.v%3Aon%2Cs.t%3A21%7Cs.e%3Al%7Cp.v%3Aoff%2Cs.t%3A2%7Cp.v%3Aoff%2Cs.t%3A2%7Cs.e%3Al.t%7Cp.v%3Aoff%2Cs.t%3A33%7Cp.v%3Aoff%2Cs.t%3A33%7Cs.e%3Al.i%7Cp.v%3Aoff%2Cs.t%3A3%7Cs.e%3Al.i%7Cp.v%3Aoff%2Cs.t%3A51%7Cs.e%3Al%7Cp.v%3Aoff%2Cs.t%3A4%7Cp.v%3Aoff',\n        crossOrigin: 'Anonymous'\n      })\n    });\n    return [rasterLayer];\n  }\n\n  getAddress() {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const f = features[0];\n      const ed = yield _this3.nominatimService.getAddressFromLatLon(f.latitude, f.longitude);\n    })();\n  }\n\n  telaConfigs() {\n    let alterado = false;\n    this.router.navigate(['/telaHome/telaConfig']);\n    alterado = true;\n\n    if (alterado = true) {\n      this.router.navigate(['/telaHome/']);\n      alterado = false;\n    }\n  }\n\n}\n\nTelaHomeComponent.ɵfac = function TelaHomeComponent_Factory(t) {\n  return new (t || TelaHomeComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.DadosService), i0.ɵɵdirectiveInject(i2.DadosService));\n};\n\nTelaHomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: TelaHomeComponent,\n  selectors: [[\"app-tela-home\"]],\n  viewQuery: function TelaHomeComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.element = _t.first);\n    }\n  },\n  decls: 33,\n  vars: 2,\n  consts: [[1, \"container\"], [\"autosize\", \"\"], [\"autosize\", \"\", 1, \"CampoSuperior\"], [\"src\", \"https://cdn-icons-png.flaticon.com/512/1/1324.png\", 2, \"width\", \"64px\", \"height\", \"64px\", \"padding\", \"10px\", \"filter\", \"invert(80%)\"], [1, \"Titulo01\"], [\"type\", \"button\", \"mat-button\", \"\", 1, \"btnLateralMenu\", 3, \"click\"], [\"mode\", \"side\", 1, \"sidenav\"], [\"drawer\", \"\"], [1, \"linker\", 3, \"click\"], [\"src\", \"/assets/config.png\", 1, \"imgTool\"], [\"routerLink\", \"\", 1, \"linker\"], [\"src\", \"/assets/sair.png\", 1, \"imgTool\"], [\"config\", \"\"], [1, \"flex-container\"], [1, \"mapaEntrada\"], [\"id\", \"map\", 1, \"mapa01\"], [\"id\", \"overlay\", 2, \"background-color\", \"white\", \"width\", \"100%\", \"height\", \"100%\", \"padding\", \"10px\", \"border-radius\", \"10px\"], [\"popup\", \"\"]],\n  template: function TelaHomeComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r3 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"mat-drawer-container\", 1);\n      i0.ɵɵelementStart(2, \"mat-toolbar\", 2);\n      i0.ɵɵelement(3, \"img\", 3);\n      i0.ɵɵelementStart(4, \"span\", 4);\n      i0.ɵɵtext(5, \"Bombeiros Digital\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 5);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_button_click_6_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r0 = i0.ɵɵreference(9);\n\n        return _r0.toggle();\n      });\n      i0.ɵɵtext(7, \" Ferramentas \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"mat-drawer\", 6, 7);\n      i0.ɵɵelementStart(10, \"h2\");\n      i0.ɵɵtext(11, \"Menu Principal\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"br\");\n      i0.ɵɵelement(13, \"br\");\n      i0.ɵɵelementStart(14, \"p\", 8);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_p_click_14_listener() {\n        i0.ɵɵrestoreView(_r3);\n\n        const _r1 = i0.ɵɵreference(22);\n\n        return _r1.toggle();\n      });\n      i0.ɵɵelement(15, \"img\", 9);\n      i0.ɵɵtext(16, \"Configura\\u00E7\\u00F5es\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(17, \"br\");\n      i0.ɵɵelementStart(18, \"p\", 10);\n      i0.ɵɵelement(19, \"img\", 11);\n      i0.ɵɵtext(20, \"Sair \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"mat-drawer\", 6, 12);\n      i0.ɵɵelementStart(23, \"p\", 8);\n      i0.ɵɵlistener(\"click\", function TelaHomeComponent_Template_p_click_23_listener() {\n        return ctx.telaConfigs();\n      });\n      i0.ɵɵtext(24, \" Cadastro de usuario \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(25, \"p\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(26, \"br\");\n      i0.ɵɵelement(27, \"br\");\n      i0.ɵɵelementStart(28, \"div\", 13);\n      i0.ɵɵelementStart(29, \"div\", 14);\n      i0.ɵɵelement(30, \"div\", 15);\n      i0.ɵɵelement(31, \"div\", 16, 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(31);\n      i0.ɵɵstyleProp(\"display\", ctx.display);\n    }\n  },\n  directives: [i3.MatDrawerContainer, i4.MatToolbar, i3.MatDrawer, i1.RouterLink],\n  styles: [\"@charset \\\"UTF-8\\\";\\n.CampoSuperior[_ngcontent-%COMP%] {\\n  background-color: red;\\n  padding: 20px;\\n  width: 100vw;\\n  padding: 0;\\n}\\n.flex-container[_ngcontent-%COMP%] {\\n  flex-direction: row;\\n  display: flex;\\n  align-self: center;\\n  justify-content: center;\\n  align-content: center;\\n  padding: 0;\\n  height: 44em;\\n  width: 100vw;\\n  background-color: white;\\n  margin-top: -40px;\\n  max-height: 80em;\\n}\\n.flex-item[_ngcontent-%COMP%] {\\n  flex-direction: row;\\n  display: flex;\\n  align-self: center;\\n  justify-content: space-evenly;\\n  align-content: center;\\n  width: 100px;\\n  height: 100px;\\n  background-color: white;\\n}\\n.sidenav-content[_ngcontent-%COMP%] {\\n  display: flex;\\n  height: 100%;\\n}\\n.sidenav[_ngcontent-%COMP%] {\\n  width: 20em;\\n  justify-content: end;\\n  align-items: end;\\n  align-content: flex-end;\\n  display: flex;\\n  position: fixed;\\n}\\n.container[_ngcontent-%COMP%] {\\n  height: 141vh;\\n  width: 79vw;\\n  display: contents;\\n}\\n.btnLateralMenu[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  border: 0;\\n  background-color: white;\\n  padding: 5px;\\n  margin: 20px;\\n  transition: 0.3s;\\n}\\n.btnLateralMenu[_ngcontent-%COMP%]:hover {\\n  transition: 0.2s;\\n}\\n.linker[_ngcontent-%COMP%]:hover {\\n  transition: 400ms;\\n  background-position: left;\\n  color: white;\\n}\\n.linker[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], img[_ngcontent-%COMP%]:hover {\\n  filter: invert(80%);\\n}\\n.linker[_ngcontent-%COMP%] {\\n  cursor: pointer;\\n  height: 2em;\\n  padding: 5px;\\n  display: flex;\\n  transition: 500ms ease-out;\\n  color: black;\\n  outline: 0;\\n  align-items: center;\\n  font-size: 18px;\\n  align-content: center;\\n  background: red;\\n  \\n  background: linear-gradient(to left, white 50%, red 50%) right;\\n  background-size: 200%;\\n  transition: 0.5s ease-out;\\n}\\n.mat-drawer-container[_ngcontent-%COMP%] {\\n  position: relative;\\n  z-index: 1;\\n  box-sizing: border-box;\\n  -webkit-overflow-scrolling: touch;\\n  display: block;\\n  overflow: hidden;\\n  height: 100%;\\n}\\n.Titulo01[_ngcontent-%COMP%] {\\n  color: white;\\n}\\n.imgTool[_ngcontent-%COMP%] {\\n  height: 24px;\\n  width: 24px;\\n  margin: 5px;\\n}\\n.imgMaps[_ngcontent-%COMP%] {\\n  height: 28px;\\n  width: 28px;\\n  margin: 5px;\\n}\\n.mapa01[_ngcontent-%COMP%] {\\n  border: 1px solid black;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  border-radius: 2px;\\n}\\n.mapaEntrada[_ngcontent-%COMP%] {\\n  height: 50%;\\n  width: 77%;\\n  margin-top: 48px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlbGEtaG9tZS5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQkFBZ0I7QUFBaEI7RUFDRSxxQkFBQTtFQUNBLGFBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtBQUVGO0FBR0E7RUFDRSxtQkFBQTtFQUNBLGFBQUE7RUFDQSxrQkFBQTtFQUNBLHVCQUFBO0VBQ0EscUJBQUE7RUFDQSxVQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSx1QkFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7QUFBRjtBQU9BO0VBQ0UsbUJBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7RUFDQSw2QkFBQTtFQUNBLHFCQUFBO0VBQ0EsWUFBQTtFQUNBLGFBQUE7RUFFQSx1QkFBQTtBQUxGO0FBUUE7RUFDRSxhQUFBO0VBQ0EsWUFBQTtBQUxGO0FBU0E7RUFFRSxXQUFBO0VBQ0Esb0JBQUE7RUFDQSxnQkFBQTtFQUNBLHVCQUFBO0VBQ0EsYUFBQTtFQUNBLGVBQUE7QUFQRjtBQVVBO0VBQ0UsYUFBQTtFQUNBLFdBQUE7RUFDQSxpQkFBQTtBQVBGO0FBV0E7RUFDRSxlQUFBO0VBQ0EsU0FBQTtFQUNBLHVCQUFBO0VBQ0EsWUFBQTtFQUNBLFlBQUE7RUFDQSxnQkFBQTtBQVJGO0FBV0E7RUFDRSxnQkFBQTtBQVJGO0FBWUE7RUFFRSxpQkFBQTtFQUNBLHlCQUFBO0VBQ0EsWUFBQTtBQVZGO0FBYUE7RUFDRSxtQkFBQTtBQVZGO0FBYUE7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EsMEJBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtFQUNBLG1CQUFBO0VBQ0EsZUFBQTtFQUNBLHFCQUFBO0VBQ0EsZUFBQTtFQUVBLGtEQUFBO0VBQ0EsOERBQUE7RUFDQSxxQkFBQTtFQUNBLHlCQUFBO0FBWEY7QUFjQTtFQUNFLGtCQUFBO0VBQ0EsVUFBQTtFQUNBLHNCQUFBO0VBQ0EsaUNBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxZQUFBO0FBWEY7QUFjQTtFQUNFLFlBQUE7QUFYRjtBQWNBO0VBQ0UsWUFBQTtFQUFjLFdBQUE7RUFBYSxXQUFBO0FBVDdCO0FBV0E7RUFDRSxZQUFBO0VBQWMsV0FBQTtFQUFhLFdBQUE7QUFON0I7QUFTQTtFQUNFLHVCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0Esa0JBQUE7QUFORjtBQVNBO0VBQ0UsV0FBQTtFQUNBLFVBQUE7RUFDQSxnQkFBQTtBQU5GIiwiZmlsZSI6InRlbGEtaG9tZS5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5DYW1wb1N1cGVyaW9ye1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZWQ7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIHdpZHRoOiAxMDB2dztcbiAgcGFkZGluZzogMDtcblxuICBcbn1cblxuLmZsZXgtY29udGFpbmVyIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICBwYWRkaW5nOiAwO1xuICBoZWlnaHQ6IDQ0ZW07XG4gIHdpZHRoOiAxMDB2dztcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI1NSwgMjU1LCAyNTUpO1xuICBtYXJnaW4tdG9wOiAtNDBweDtcbiAgbWF4LWhlaWdodDogODBlbTtcbn1cblxuXG5cblxuXG4uZmxleC1pdGVtIHtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcbiAgYWxpZ24tY29udGVudDogY2VudGVyO1xuICB3aWR0aDogMTAwcHg7XG4gIGhlaWdodDogMTAwcHg7XG5cbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XG59XG5cbi5zaWRlbmF2LWNvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBoZWlnaHQ6IDEwMCU7XG4gIFxufVxuXG4uc2lkZW5hdiB7XG4gXG4gIHdpZHRoOiAyMGVtO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcbiAgYWxpZ24taXRlbXM6IGVuZDtcbiAgYWxpZ24tY29udGVudDogZmxleC1lbmQ7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbn1cblxuLmNvbnRhaW5lciB7XG4gIGhlaWdodDogMTQxdmg7XG4gIHdpZHRoOiA3OXZ3O1xuICBkaXNwbGF5OiBjb250ZW50cztcblxufVxuXG4uYnRuTGF0ZXJhbE1lbnV7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcbiAgcGFkZGluZzogNXB4O1xuICBtYXJnaW46IDIwcHg7XG4gIHRyYW5zaXRpb246IC4zcztcbn1cbi8vZDMgcGxvdGx5IFxuLmJ0bkxhdGVyYWxNZW51OmhvdmVye1xuICB0cmFuc2l0aW9uOiAuMnM7XG4gIC8vYmFja2dyb3VuZC1jb2xvcjogcmdiKDIwNCwgMTk2LCAxOTYpO1xuIFxufVxuLmxpbmtlcjpob3ZlcntcbiAgXG4gIHRyYW5zaXRpb246IDQwMG1zO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBsZWZ0O1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5saW5rZXIgcCxpbWc6aG92ZXJ7XG4gIGZpbHRlcjogaW52ZXJ0KDgwJSk7XG59XG5cbi5saW5rZXJ7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgaGVpZ2h0OiAyZW07XG4gIHBhZGRpbmc6IDVweDtcbiAgZGlzcGxheTogZmxleDtcbiAgdHJhbnNpdGlvbjogNTAwbXMgZWFzZS1vdXQ7XG4gIGNvbG9yOiBibGFjaztcbiAgb3V0bGluZTogMDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgZm9udC1zaXplOiAxOHB4O1xuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6IHJlZDsgXG5cbiAgLyogQW5pbWHDp8OjbyBkZSBtdWRhciBjb3IgZGEgZXNxdWVyZGEgcHJhIGRpcmVpdGEgKi9cbiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KHRvIGxlZnQsIHJnYigyNTUsIDI1NSwgMjU1KSA1MCUsIHJnYigyNTUsIDAsIDApIDUwJSkgcmlnaHQ7XG4gIGJhY2tncm91bmQtc2l6ZTogMjAwJTtcbiAgdHJhbnNpdGlvbjogLjVzIGVhc2Utb3V0O1xufVxuXG4ubWF0LWRyYXdlci1jb250YWluZXJ7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgei1pbmRleDogMTtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgLXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6IHRvdWNoO1xuICBkaXNwbGF5OiBibG9jaztcbiAgb3ZlcmZsb3c6IGhpZGRlbjsgXG4gIGhlaWdodDogMTAwJTtcbn1cblxuLlRpdHVsbzAxe1xuICBjb2xvcjogd2hpdGU7XG59XG5cbi5pbWdUb29se1xuICBoZWlnaHQ6IDI0cHg7IHdpZHRoOiAyNHB4OyBtYXJnaW46IDVweDtcbn1cbi5pbWdNYXBze1xuICBoZWlnaHQ6IDI4cHg7IHdpZHRoOiAyOHB4OyBtYXJnaW46IDVweDtcbn1cblxuLm1hcGEwMXtcbiAgYm9yZGVyOiAxcHggc29saWQgYmxhY2s7XG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbn1cblxuLm1hcGFFbnRyYWRhe1xuICBoZWlnaHQ6IDUwJTtcbiAgd2lkdGg6IDc3JTtcbiAgbWFyZ2luLXRvcDogNDhweDtcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/src/app/tela-home/tela-home.component.ts","/home/xittz/Documentos/sa-bombeiros3/sa-bombeiros/src/app/tela-home/tela-home.component.html"],"names":[],"mappings":"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","sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Router } from '@angular/router';\nimport 'ol/ol.css';\nimport Map from 'ol/Map';\nimport View from 'ol/View';\nimport {XYZ, Cluster,  Vector as VectorSource} from 'ol/source';\nimport {Tile as TileLayer, Vector as VectorLayer} from 'ol/layer';\nimport * as Proj from 'ol/proj.js';//Converter cordenadas para lat e long\nimport { DadosService } from '../services/dados.service';\nimport 'ol/ol.css';\nimport Feature from 'ol/Feature';\nimport Point from 'ol/geom/Point';\nimport {\n  Circle as CircleStyle,\n  Fill,\n  Stroke,\n  Style,\n  Text,\n} from 'ol/style';\nimport {boundingExtent} from 'ol/extent';\nimport { Overlay } from 'ol';\nimport { features } from 'src/assets/features';\n\nconst DEFAULTS = {\n  center: [-48.615261, -27.593823],\n  initialZoom: 13,\n  minZoom: 4,\n  maxZoom: 17,\n};\n\n@Component({\n  selector: 'app-tela-home',\n  templateUrl: './tela-home.component.html',\n  styleUrls: ['./tela-home.component.scss']\n})\n\n\n\nexport class TelaHomeComponent implements OnInit {\n\n  constructor(private router: Router,\n     private dadosService:DadosService, private nominatimService: DadosService,) { }\n\n  @ViewChild('popup') element!: ElementRef\n  pontos: any;\n  display : string = 'none';\n  popup!: Overlay;\n\n  async ngOnInit() {\n    this.pontos = await this.dadosService.list()\n  }\n\n  async ngAfterViewInit(){\n  \n    this.popup = new Overlay ({\n      element: this.element.nativeElement,\n    })\n   const map = this.criarMapa();\n   const cluster = this.cluster(features.slice(features.length / 3, (2 * features.length) / 3),\n   '#0f0');\n   this.addCluster(map);\n    map.addLayer(cluster);\n\n  }\n\n  private criarMapa(){\n\n     const map = new Map({\n      layers: this.getInitialLayers(),\n      target: 'map',\n      overlays: [this.popup],\n      view: new View({\n        center: Proj.fromLonLat(DEFAULTS.center),\n        zoom: DEFAULTS.initialZoom,\n      }),\n    });\n    return map;\n  }\n\n  private addCluster(map: Map){\n    const features = this.getFeatures();\n    const clustersR = this.cluster(\n      features.slice(0, features.length / 3), '#f00'\n    );\n \n    const clustersG = this.cluster(\n      features.slice(features.length / 3, (2 * features.length) / 3),\n      '#0f0'\n    );\n    const clustersB = this.cluster(\n      features.slice((2 * features.length) / 3, features.length),\n      '#00f'\n    );\n    map.addLayer(clustersR);\n    map.addLayer(clustersG);\n    map.addLayer(clustersB);\n\n      map.on('click', (e) => {\n        this.display = 'none';\n        clustersR\n        .getFeatures(e.pixel)\n        .then((clickedFeatures: any) =>\n          this.clickCluster(e, clickedFeatures, map)\n        );\n      clustersG\n        .getFeatures(e.pixel)\n        .then((clickedFeatures: any) =>\n          this.clickCluster(e, clickedFeatures, map)\n        );\n      clustersB\n        .getFeatures(e.pixel)\n        .then((clickedFeatures: any) =>\n          this.clickCluster(e, clickedFeatures, map)\n        );\n      })\n\n\n  }\n\n  private clickCluster(evt: any, clickedFeatures: any, map: Map) {\n    if (clickedFeatures.length) {\n      const features = clickedFeatures[0].get('features');\n      if (features.length > 1) {\n        const extent = boundingExtent(\n          features.map((r: any) => r.getGeometry().getCoordinates())\n        );\n        map\n          .getView()\n          .fit(extent, { duration: 1000, padding: [50, 50, 50, 50] });\n      } else if (features.length == 1) {\n        this.insertOverlay(evt, features[0].get('data'));\n      }\n    }\n  }\n\n  private cluster(features: any, color: string){\n    for (let i = 0; i < this.pontos.length; ++i) {\n      const ponto = Proj.fromLonLat([\n        this.pontos[i].longitude,\n        this.pontos[i].latitude,\n      ])\n      features[i] = new Feature(new Point(ponto));\n    }\n    \n    const source = new VectorSource({\n      features: features,\n    });\n    \n    const clusterSource = new Cluster({\n      distance: 80,\n      source: source,\n    });\n    \n    const styleCache: any = {};\n\n    const clusters = new VectorLayer({\n      source: clusterSource,\n      style: function (feature) {\n        const size = feature.get('features').length;\n        let style = styleCache[size];\n        if (!style) {\n          style = new Style({\n            image: new CircleStyle({\n              radius: 10,\n              stroke: new Stroke({\n                color: '#000',\n              }),\n              fill: new Fill({\n                color: '#ff0000',\n              }),\n            }),\n            text: new Text({\n              text: size.toString(),\n              fill: new Fill({\n                color: '#fff',\n              }),\n            }),\n          });\n          styleCache[size] = style;\n        }\n        return style;\n      },\n    });\n    \n   \n\n    return clusters;\n  }\n\n  private insertOverlay(evt: any, data: Record<string, any>) {\n    this.display = 'block';\n    const element = this.popup.getElement()!;\n    const coordinate = evt.coordinate;\n    element.innerHTML = `<div><span>Item: ${data.item}</span><br><span>Rua: ${data.rua}</span></span></div>`;\n    this.popup.setPosition(coordinate);\n  }\n\n  private getFeatures() {\n    return features.map((f) => {\n      const feature = new Feature(\n        new Point(Proj.fromLonLat([f.longitude, f.latitude]))\n      );\n      feature.set('data', f);\n      return feature;\n    });\n  }\n\n  private getInitialLayers() {\n    const rasterLayer = new TileLayer({\n      source: new XYZ({\n        url: 'https://mt1.google.com/vt/lyrs=r&x={x}&y={y}&z={z}&apistyle=s.t%3A1%7Cp.v%3Aon%2Cs.t%3A21%7Cs.e%3Al%7Cp.v%3Aoff%2Cs.t%3A2%7Cp.v%3Aoff%2Cs.t%3A2%7Cs.e%3Al.t%7Cp.v%3Aoff%2Cs.t%3A33%7Cp.v%3Aoff%2Cs.t%3A33%7Cs.e%3Al.i%7Cp.v%3Aoff%2Cs.t%3A3%7Cs.e%3Al.i%7Cp.v%3Aoff%2Cs.t%3A51%7Cs.e%3Al%7Cp.v%3Aoff%2Cs.t%3A4%7Cp.v%3Aoff',\n        crossOrigin: 'Anonymous',\n      }),\n    });\n    return [rasterLayer];\n  }\n\n  private async getAddress() {\n    const f = features[0];\n    const ed = await this.nominatimService.getAddressFromLatLon(\n      f.latitude,\n      f.longitude\n    );\n    }\n  showFiller = false;\n  \n\n\n   telaConfigs(): void {\n\n    let alterado = false;\n    this.router.navigate(['/telaHome/telaConfig']); \n    alterado = true;\n\n    if(alterado = true){\n      this.router.navigate(['/telaHome/']); alterado = false;\n    }\n    \n    }\n  \n\n  }  \n","<div class=\"container\">\n  <mat-drawer-container autosize>\n\n    <mat-toolbar class=\"CampoSuperior\" autosize>\n\n      <img src=\"https://cdn-icons-png.flaticon.com/512/1/1324.png\"\n        style=\"width: 64px; height: 64px; padding: 10px; filter: invert(80%)\" />\n      <span class=\"Titulo01\">Bombeiros Digital</span>\n\n      <button type=\"button\" class=\"btnLateralMenu\" mat-button (click)=\"drawer.toggle()\">\n        Ferramentas\n      </button>\n    </mat-toolbar>\n    <!-- ↓ Menu lateral ↓ -->\n    <mat-drawer #drawer class=\"sidenav\" mode=\"side\">\n      <h2>Menu Principal</h2>\n      <br />\n      \n      <br />\n\n      <p class=\"linker\" (click)=\"config.toggle()\" >\n        <img class=\"imgTool\" src=\"/assets/config.png\" />Configurações</p>\n\n      <br />\n      <p class=\"linker\" routerLink=\"\">\n        <img class=\"imgTool\" src=\"/assets/sair.png\" />Sair\n      </p>\n    </mat-drawer>\n\n    <mat-drawer #config class=\"sidenav\" mode=\"side\">\n      <!--<app-tela-config></app-tela-config>-->\n      <p   class=\"linker\" (click)=\"telaConfigs()\" >\n        Cadastro de usuario\n      <p>\n    </mat-drawer>\n\n    <br />\n    <br />\n            <!-- ↓ centro da tela home ↓ -->\n    <div class=\"flex-container\">\n\n      <div class=\"mapaEntrada\">\n      \n        <!-- zona do mapa -->\n        <div id=\"map\" class=\"mapa01\"></div>\n        <div\n  #popup\n  id=\"overlay\"\n  style=\"\n    background-color: white;\n    width: 100%;\n    height: 100%;\n    padding: 10px;\n    border-radius: 10px;\n  \"\n  [style.display]=\"display\"\n></div>\n\n      </div>\n    </div>\n  </mat-drawer-container>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}